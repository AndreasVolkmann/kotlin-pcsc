package = au.id.micolous.kotlin.pcsc.internal
noStringConversion = SCardListReaders

# To be able to use PCSC.framework, we need to pretend we're using Objective-C.
language.osx = Objective-C
modules.osx = PCSC
compilerOpts.osx = -framework PCSC
linkerOpts.osx = -framework PCSC

# Other platforms work nicer...
language.linux = C
depends.linux = posix
headers.linux = PCSC/wintypes.h PCSC/pcsclite.h PCSC/reader.h PCSC/winscard.h
compilerOpts.linux = -pthread -I/usr/include/PCSC -I/usr/include -I/usr/include/x86_64-linux-gnu
linkerOpts.linux = -L/usr/lib64 -L/usr/lib/x86_64-linux-gnu -lpcsclite
headerFilter.linux = PCSC/**

language.mingw = C
headers.mingw = winscard.h
linkerOpts.mingw = -lWinSCard
headerFilter.mingw = winscard.h pcsclite.h

---

#if defined(__APPLE__)
typedef int32_t SCARDSTATUS;
typedef uint32_t DWORD;

#elif defined(__linux__)
typedef LONG SCARDSTATUS;

#else
// TODO
#endif
